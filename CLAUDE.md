# CLAUDE.md - OkusuriNote プロジェクト

**最終更新**: 2025-07-01 00:15  
**現在フェーズ**: Phase 3実行中（HTML First実装）- 第2バッチ実行中（4薬剤：digoxin、furosemide、perindopril、metformin）  
**ダッシュボード**: MASTER_STATUS_DASHBOARD.md（CEO最終責任、Manager実務更新）  
**公開サイト**: https://penwitmi.github.io/okusuri_note  
**進捗管理**: MASTER_STATUS_DASHBOARD.md（プロジェクトルートに配置）

## 🎉 Phase 3完全完了（2025-07-01 00:43）

**第1バッチ**: ✅ 完了（3薬剤、平均117%達成）  
**第2バッチ**: ✅ 完了（4薬剤、平均106%達成）  
**第3バッチ**: ✅ 完了（5薬剤、既存含む）  
**全体進捗**: 22/22薬剤完成（100%）🎊

**OkusuriNoteプロジェクト完成！**

## 🌟 プロジェクト概要

**OkusuriNote - 薬剤図鑑** は、薬学生から臨床医まで対応する包括的な薬学教育Webプラットフォームです。「なぜ似た薬が複数存在するのか」への明確な回答を通じて、感動的なストーリーと詳細な薬学情報を統合し、真の薬学的理解を促進します。

### 🏗️ アーキテクチャ設計：HTML First（2025-06-30より）

```
HTML直接編集（最優先）
    ↓
docs/generated/    →    GitHub Pages
(高品質HTML)           (感動的な体験)
```

**設計原則**: 品質優先・価値最大化
- **HTML直接編集**: 500行以上の充実したコンテンツ作成（第一優先）
- **docs/**: 高品質HTMLを直接配置・公開（GitHub Pages）
- **source_materials/**: 下書き・メモ・構想用（補助的役割）
- **tools/**: 必要時のみ使用（補助ツール）

**重要**: OkusuriNoteの核心価値「なぜ似た薬が複数存在するのか」を最大限表現するため、HTML直接編集により感動的で教育的なコンテンツを創造します。

## 📊 現在の実装状況（2025-06-30 23:04更新）

### ✅ 高品質HTML完成済み（10薬剤 = 45%）
- **ARB**: telmisartan（916行）、losartan（764行）、candesartan（610行）
- **利尿薬**: spironolactone（607行）
- **SGLT2阻害薬**: empagliflozin（492行）
- **スタチン**: rosuvastatin（476行）
- **PPI**: omeprazole（475行）
- **糖尿病薬**: metformin（308行）
- **SSRI**: escitalopram（292行）、sertraline（263行）

### ❌ スケルトン状態（12薬剤 = 55%）- Phase 3実装対象
- **高優先度**: dapagliflozin、vancomycin、warfarin、digoxin、furosemide、perindopril
- **中優先度**: enalapril、bisoprolol、atorvastatin、lansoprazole、esomeprazole、metformin_originated
### 📝 MDファイル（参考資料）
- **高品質MD（300行以上）**: 12薬剤分のコンテンツ原稿
- **中品質MD（100-299行）**: 10薬剤分の基本情報
- **用途**: HTML作成時の参考資料、下書き、構想用

### 📁 ディレクトリ構造（2025-06-30構造改革完了）

```
okusuri_note/
├── MASTER_STATUS_DASHBOARD.md      # 進捗管理ダッシュボード（2025-06-30移動）
├── CLAUDE.md                       # プロジェクト概要（このファイル）
├── source_materials/               # コンテンツ原稿（論理構造）
│   ├── drugs/                      # 個別薬剤事典（23ファイル）
│   ├── drug_evolution/             # なぜ似た薬があるのか（19ファイル）
│   ├── drug_stories/               # 薬の物語（14ファイル）
│   ├── study_guides/               # 薬学学習ガイド（12ファイル）
│   ├── _resources/                 # 内部リソース（8ファイル・非公開）
│   ├── _system/                    # システム文書（7ファイル・非公開）
│   └── drug_database_originated/   # HTML→MD変換済み（10ファイル）
├── tools/                          # 補助ツール（通常使用しない）
│   ├── convert_pharmadx.js         # 旧変換スクリプト（非推奨）
│   ├── config.json                 # 旧設定ファイル
│   ├── run_conversion.sh           # 旧スクリプト（非推奨）
│   └── build.sh                    # 旧スクリプト（非推奨）
├── docs/                           # 公開サイト（GitHub Pages）
│   ├── index.html                  # メインページ
│   ├── generated/                  # 高品質HTMLコンテンツ（44ファイル）
│   │   ├── drugs/                  # 個別薬剤ページ（22ファイル）
│   │   ├── groups/                 # 薬効群ページ
│   │   ├── stories/                # ストーリーページ
│   │   └── ...
│   └── css/                        # メインスタイル
└── project-docs/                   # プロジェクト管理文書（時系列構造）
    ├── 2025-06-XX-event-name/      # 時系列イベントフォルダ
    ├── development-guides/         # 恒久的開発ガイド
    ├── reference/                  # リファレンス資料
    └── _archive_superseded/        # アーカイブ
```

## 🔄 標準開発ワークフロー（HTML First）

### 1. リサーチ・構想フェーズ
```bash
# 医学的情報収集、ストーリー要素収集
# source_materials/drafts/ にメモ・下書き（オプション）
```

### 2. HTML直接作成フェーズ
```bash
# 高品質HTMLテンプレートから開始
templates/drug-detail-premium.html

# 500行以上の充実したコンテンツを作成
# 医師の証言、歴史的ストーリー、視覚的要素を含む
```

### 3. 品質チェック・配置フェーズ
```bash
# 品質基準の確認（500行以上、感動的要素、視覚的魅力）
cp drug-name.html docs/generated/drugs/

# ローカル確認
cd docs && python -m http.server 8000
# GitHub Pages自動デプロイ
```

**詳細**: `project-docs/2025-06-30-html-first-architecture/HTML_DIRECT_EDITING_WORKFLOW.md` 参照

## 🎯 核心価値とコンテンツ戦略

### 教育理念
**「薬学知識の網目が真の理解を生む」**

### 5つのコンテンツタイプ
1. **薬効群進化モデル**: なぜ似た薬が複数存在するのかへの回答
2. **個別薬剤詳細**: 臨床使い分けの具体的基準
3. **感動ストーリー**: 薬剤開発の歴史的文脈と人間ドラマ
4. **学習ツール**: 国試対策・暗記支援
5. **実践ガイド**: 薬局実習・臨床応用

### クロスリファレンス型学習
- **学習の深化**: リンクが理解を深める
- **文脈の拡張**: 新たな視点を提供  
- **実用的価値**: 比較・選択に役立つ

## 🛠️ 技術スタック

### フロントエンド
- **HTML5/CSS3**: レスポンシブデザイン
- **Vanilla JavaScript**: インタラクティブ機能
- **GitHub Pages**: 静的サイトホスティング


### 品質管理
- **コンテンツ品質**: A/B/C級分類システム
- **技術品質**: レスポンシブ、アクセシビリティ、SEO
- **統合品質**: HTML直接編集による品質管理

## 🚨 重要なルール

### 問題解決の絶対原則（2025-06-29追加）
**問題を完全に解決してから次に進む - 中途半端な対応は厳禁**
- **発見した問題は即座に完全解決**: セキュリティリスク、機能不全、エラーは放置厳禁
- **次のステップへの移行禁止**: 現在の問題が100%解決されるまで新しいタスク開始禁止
- **「後で対応」は許されない**: 特にセキュリティリスク（公開ディレクトリの誤配置等）は即時対応必須
- **確認と検証の徹底**: 問題解決後は必ず動作確認・アクセシビリティ確認を実施
- **中途半端な git 操作禁止**: ステージング→コミット→プッシュの一連の流れを完結させる

### Git Worktree不使用方針（2025-06-28確定）
**このプロジェクトではGit Worktreeを使用しません。**
- シンプルなWebサイト作成が目標のため、並列開発は不要
- 全ての開発は統一ディレクトリで実施
- 1つのエージェント/開発者での集中開発を推奨
- **Manager注意**: Worktree自動作成機能は使用禁止

### 作業場所の厳守
- すべての作業は `/Users/nishimototakashi/claude code/ai-team/code/okusuri_note/` 内で実施
- AI-Team外での作業は厳禁
- **異なる場所での作業は「虚偽報告」の主原因**


### docs/ディレクトリの性質（重要）
**🚨 docs/は公開コンテンツ専用ディレクトリ**
- **GitHub Pages自動公開**: docs/内のすべてのファイルがhttps://penwitmi.github.io/okusuri_noteで公開される
- **公開対象のみ配置**: HTML、CSS、JavaScript、画像、データファイルのみ
- **内部文書は厳禁**: 開発ログ、バックアップファイル、TODO、設計書、会議メモなどは絶対に配置禁止
- **機密情報の漏洩リスク**: うっかり内部文書を配置すると全世界に公開される

**✅ docs/に配置すべきもの**
- index.html（メインページ）
- generated/（変換済み公開コンテンツ）
- css/（スタイルシート）
- js/（JavaScript）
- data/（公開用データファイル）

**❌ docs/に配置してはいけないもの**
- dev_logs/（開発ログ）→ project-docs/archive/development-logs/
- *.backup（バックアップファイル）→ project-docs/archive/
- server.log（ログファイル）→ project-docs/archive/development-logs/
- TODO.md、MEMO.md等の内部文書 → project-docs/
- 個人情報、APIキー、設定ファイル等の機密情報

### CEO×Manager協働体制（2025-06-27強化）
**単なるメッセージ転送ではなく、深い思考による価値創造を**

#### なぜ協働思考が必要か
1. **表面的な指示では教育的価値が生まれない**
   - ❌「薬の使い分けを書いて」→ 添付文書の羅列
   - ✅「なぜこの薬が必要になったか」→ 本質的理解

2. **PharmaDxの核心価値を実現するため**
   - 「なぜ似た薬が複数存在するのか」への深い回答
   - 感動的なストーリーと実用的知識の最適な融合
   - 学生から臨床医まで各レベルでの価値創造

#### 協働判断基準（4つのトリガー）
協働が必要な場面を見極める具体的基準：

1. **影響度（Impact）**: プロジェクト全体の方向性に関わる
2. **複雑さ（Complexity）**: 複数専門知識の統合が必要
3. **前例性（Precedent）**: 今後の標準となる重要な決定
4. **リスク（Risk）**: 失敗時の影響が重大

**判断基準**: 3つ以上が「高」→必須協働、2つが「高」→推奨協働

## 📈 現在のフェーズと今後の計画

### ✅ Phase 2完了（2025-06-30）
- 大規模ディレクトリ構造改造完了
- HTML First アーキテクチャ確立
- 10薬剤の高品質HTML完成（45%）

### 🔄 Phase 3実行中（2025-06-30開始）
- **HTML First実装**: 12薬剤のスケルトンHTMLを500行以上に
- **最優先薬剤**: 
  - dapagliflozin（SGLT2阻害薬の革新）
  - vancomycin（MRSA最終兵器）
  - warfarin（殺鼠剤から救命薬へ）
- **品質目標**: 感動的要素、視覚的魅力、教育的価値の最大化

### 📋 長期ビジョン
- **自動化パイプライン**: GitHub Actions導入
- **品質管理**: 自動テスト・検証システム
- **スケーラビリティ**: 大量コンテンツ対応
- **ユーザー機能**: パーソナライズ・学習進捗管理

## 🎓 教育的インパクト

### 従来の限界を突破
- **暗記中心 → 理解中心**: なぜそうなるかの本質的理解
- **単発学習 → 体系学習**: 薬学知識の相互関連性
- **理論偏重 → 実践統合**: 臨床現場での実用価値

### 学習体験の革新
- **感動 → 興味 → 深化**: 自然な学習動機の創出
- **視覚化 → 記憶定着**: 進化図・比較表による理解促進
- **クロスリファレンス → 応用力**: 多角的思考能力の育成

## 🚨 最重要：進捗管理

### マスター進捗ダッシュボード
**場所**: `/MASTER_STATUS_DASHBOARD.md`（プロジェクトルート）
**目的**: 全タスクと文書の状態を一元管理する唯一の情報源
**更新**: 2025-06-30にプロジェクトルートに移動（アクセシビリティ向上）

**全員必須**：
- 作業開始前に必ず確認
- タスク状態変更時は即座に更新
- 他のドキュメントとの整合性を保つ

## 📚 関連ドキュメント

### アーキテクチャ・開発ガイド
- `project-docs/2025-06-30-html-first-architecture/HTML_FIRST_ARCHITECTURE.md` - HTML First設計方針
- `project-docs/2025-06-30-html-first-architecture/HTML_DIRECT_EDITING_WORKFLOW.md` - HTML直接編集ワークフロー
- `project-docs/2025-06-30-phase2-planning/PHASE2_MAJOR_RESTRUCTURE_PLAN.md` - Phase 2計画書

### 参照・分析
- `project-docs/reference/DRUG_CONTENT_INDEX.md` - 全コンテンツインデックス
- `project-docs/reference/EXISTING_CONTENT_ANALYSIS_REPORT.md` - 既存コンテンツ分析

### プロジェクト履歴
- `project-docs/2025-06-30-content-restructure/` - コンテンツ構造改革記録
- `project-docs/README.md` - プロジェクトドキュメント時系列構造ガイド

### 開発ガイド
- `README.md` - プロジェクト概要・クイックスタート
- `source_materials/` - 参考資料・下書き（各ディレクトリのREADME参照）

## 🚨 重要な教訓・学習記録

### CLAUDE.md誤上書きインシデント（2025-06-23追加）
- **原因**: 既存ファイルが空という異常状態を正常と誤認
- **教訓**: 既存ファイルが空 = 絶対におかしい。特にCLAUDE.mdは必ず内容がある
- **対策**: 既存ファイルは必ずReadで確認、Writeツール使用禁止、Editのみ使用
- **根本原因**: 「既存のものには既存の内容がある」という当たり前の前提の欠如

### Firebase無料枠超過インシデント（2025-06-22追加）
- **原因**: onSnapshot内でデータ変更→無限ループ
- **教訓**: リスナー内でのデータ変更は絶対禁止
- **対策**: ローカルエミュレータ優先、使用量の定期確認
- **詳細**: 各プロジェクトの`docs/development-guides/FIREBASE_BEST_PRACTICES.md`参照

### Readツールのoffset誤用インシデント（2025-06-23追加）
- **原因**: offset=450を指定したが、ファイルは324行しかなかった
- **症状**: 「Warning: the file exists but the contents are empty」と誤表示
- **教訓**: offsetは行番号を意味する。範囲外を指定すると空と判定される
- **対策**: 
  1. 事前に`wc -l`でファイル行数を確認
  2. 不確実な場合はoffsetを使わずに全体を読む
  3. 大きなファイルでも、まず先頭を読んでから必要に応じてoffsetを使用

### ディレクトリ違反事例（2025-06-26追記）
- `/Users/nishimototakashi/claude code/futuristic-pharmacy/` のような場所での作業は厳禁
- ブレインストーミング文書は必ず `project-docs/` 内に作成
- コード実装は必ず `source_materials/` または `tools/` 内に作成
- **なぜ重要か**: 異なる場所での作業は、成果物の発見を困難にする。「虚偽報告」の多くは、実は作業場所の相違が原因。開発者は誠実に作業していても、場所が違えば見つからない。

### Git管理体制の混乱事例（2025-06-29追加）
- **問題**: 開発者によるGit操作実行
- **対策**: CEO以外のGit操作完全禁止
- **フロー**: 開発者→Manager品質確認→CEO承認→Git実行
- **重要性**: 未検品コードのコミットは品質保証の根幹を破る

### CLAUDE.md無バックアップ全面改訂インシデント（2025-06-29発生）
- **原因**: ドキュメント整合性確保を急ぐあまり、バックアップ作成を怠った
- **問題**: 蓄積された重要な技術的メモ・教訓・注意事項を一時的に消失
- **被害**: 
  - 重要な教訓・学習記録の一時消失
  - 技術的注意事項の一時消失
  - CEO×Manager協働体制詳細の一時消失
  - 復元作業による時間損失
- **教訓**: **どんなに急いでいてもバックアップは絶対必須**
- **対策**: 
  1. 重要ファイル編集前は必ずバックアップ作成
  2. 大規模変更は段階的実行（Read→バックアップ→部分Edit→検証→次段階）
  3. 全面書き換えは原則禁止、Editによる段階的更新を優先
  4. 「急ぐ」は「バックアップしない」理由にならない
- **根本原因**: 基本的な安全手順の軽視、「便利だから」という理由でのWriteツール使用

## 📋 技術的注意事項

### ファイル操作
1. **CLAUDE.mdは必ず内容がある（30KB以上が正常）**
2. **空のCLAUDE.md = 異常事態として即座に停止**
3. **更新はEditのみ、Writeツール使用厳禁**
4. **ファイルサイズ管理**: 上限20KB（推奨15KB以下）
5. **バックアップ必須**: 重要ファイル編集前は必ずバックアップ作成
   - 命名規則: `filename_backup_YYYYMMDD_HHMM.extension`
   - 場所: `_old_files/backup_YYYYMMDD_HHMM/`
   - **例外なし**: 「急ぐ」「簡単」「小さな変更」は理由にならない
6. **段階的更新原則**: 大規模変更は Read→バックアップ→部分Edit→検証のサイクル


### バックアップ必須
- 編集前に`_old_files/backup_YYYYMMDD_HHMM/`へコピー
- 重要変更時は新規バックアップフォルダ作成

## 🎓 開発知見ドキュメント
- **場所**: `/Users/nishimototakashi/claude code/development-insights/`
- **内容**: 実プロジェクトから抽出した汎用的な知見・パターン集
  - Firebaseベストプラクティス（無限ループ対策等）
  - パフォーマンス最適化の判断基準
  - 状態管理パターン（2画面分離、カスタムフック）
  - ドメイン特化UI/UXデザイン
  - アンチパターン集
  - 再利用可能なコードテンプレート
- **活用**: 新規プロジェクト開始時に参照、実装時のテンプレートとして利用

## 更新履歴

- **2025-07-01 00:15**: 🚀 第2バッチ実行開始（4薬剤）
  - **実行中**: digoxin（Dev1）、furosemide（Dev2）、perindopril+metformin（Dev3）
  - **品質基準適用**: 必須3要素の徹底実装
  - **完了予定**: Dev1（01:30）、Dev2（01:20）、Dev3（02:15）
  - **特別指示**: digoxin「200年の歴史」、furosemide「ループ利尿薬の王者」等
- **2025-07-01 00:10**: 📐 PharmaDx品質基準確立・第2バッチ準備開始
  - **品質評価完了**: dapagliflozin、vancomycin、warfarin全て高評価
  - **品質基準確立**: 必須3要素（感動的導入、歴史的文脈、日本的配慮）
  - **構成基準**: 700-900行標準、SEO最適化、レスポンシブ対応
  - **第2バッチ対象**: digoxin、furosemide、perindopril、metformin（4薬剤）
  - **各開発者の工夫**: Dev1（4つの革命）、Dev2（戦略的統合）、Dev3（名言軸構成）
- **2025-06-30 23:59**: 🎉 第1バッチ完全完了 - 驚異的成果達成
  - **全3薬剤完成**: dapagliflozin（992行）、vancomycin（847行）、warfarin（775行+）
  - **平均達成率**: 118.7%（目標を大幅超過）
  - **平均作業時間**: 7.7分/薬剤（予定の90%短縮）
  - **品質共有セッション**: 00:05開催決定（前倒し）
  - **特記**: 感動ライブラリの効果により、全薬剤がマスターピース候補
- **2025-06-30 23:49**: 📋 MASTER_STATUS_DASHBOARDガバナンス体制確立
  - **ポリシー策定**: DASHBOARD_GOVERNANCE_POLICY.md作成（development-guides/に配置）
  - **権限明確化**: CEO最終責任、Manager実務更新委任
  - **運用開始**: 2時間ごとのCEOレビュー、5分以内のManager更新
  - **理念**: 「Single Source of Truth」の信頼性確保
- **2025-06-30 23:55**: 🚀 Phase 3実行開始 - 第1バッチ作業中
  - **実行状況**: Dev1（dapagliflozin）、Dev2（vancomycin）作業中、Dev3（warfarin）待機中
  - **完了事項**: Sonnetモデル設定、感動ライブラリ作成（emotion-library.html）
  - **次のマイルストーン**: 01:35品質共有セッション（dapagliflozinマスターピース）
- **2025-07-01 00:16**: 🎯 Phase 3第1バッチ完成＆gitコミット実施
  - **コミット内容**: 8,402行の追加（第1バッチ3薬剤の高品質HTML実装）
  - **主要成果**: dapagliflozin（992行）、vancomycin（847行）、warfarin（775行+）
  - **品質達成**: 全薬剤が目標111-124%達成、PharmaDx品質基準確立
  - **プロジェクト管理**: MASTER_STATUS_DASHBOARD.mdプロジェクトルート移動完了
  - **ドキュメント**: Phase 3実行計画、品質評価、開発知見を含む23ファイル
  - **リモートプッシュ**: https://github.com/PENwitmi/okusuri_note へ正常プッシュ完了
- **2025-06-30 23:30**: 📝 Phase 3実行計画策定完了 & source_materials宝庫の活用戦略
  - **計画書作成**: PHASE3_HTML_FIRST_EXECUTION_PLAN.md（詳細実行計画）
  - **タスク分解**: PHASE3_TASK_BREAKDOWN.md（開発者向け具体的指示）
  - **品質管理**: PHASE3_QUALITY_CHECKLIST.md（薬剤別チェックリスト）
  - **重要発見**: source_materials/drugs/に全12薬剤の高品質MD（210-742行）が完備
  - **Manager役割**: 進捗管理、品質統括、技術サポート、CEO協働の明確化
- **2025-06-30 23:04**: 📊 MASTER_STATUS_DASHBOARD.mdプロジェクトルート移動 & Phase 3開始
  - **移動**: project-docs/development-guides/ → プロジェクトルート（アクセシビリティ向上）
  - **判明**: 実は10薬剤（45%）が既に高品質HTML実装済み（drug_database_originated対応）
  - **Phase 3開始**: 残り12薬剤（55%）のスケルトンHTMLをHTML First方針で実装
  - **優先実装**: dapagliflozin（742行MD）、vancomycin（572行MD）、warfarin（571行MD）
  - **目標**: 全薬剤500行以上の感動的・教育的コンテンツ化
- **2025-06-30 20:00**: 🔴 HTML First アーキテクチャへの根本的方針転換
  - **背景**: 12薬剤の高品質HTML（100-916行）の存在と、MD→HTML変換の限界（89%情報損失）が判明
  - **決定**: HTML直接編集を第一優先とし、MDは補助的役割に変更
  - **理由**: 
    - PharmaDxの核心価値「感動的で教育的」はHTML直接編集でのみ実現可能
    - 医師の証言、歴史的ストーリー、視覚的階層がMD変換では失われる
    - 手段（コンテンツ分離）より目的（高品質コンテンツ）を優先
  - **新基準**: 
    - 最低500行（推奨700-900行）の充実したコンテンツ
    - 医師/患者の証言、感動的ストーリー必須
    - 視覚的魅力と教育的価値の両立
  - **成果物**:
    - HTML_FIRST_ARCHITECTURE.md - 新設計方針
    - HTML_DIRECT_EDITING_WORKFLOW.md - 実践ワークフロー
  - **影響**: 今後の全開発はHTML直接編集で実施、既存の高品質HTML資産を最大活用
- **2025-06-30 18:38**: docs/ディレクトリ構造改革実行完了（CEO単独作業）
  - **実施内容**:
    - 87個のHTMLファイルをarchive/backup_20250630_1832/へアーカイブ
    - CSS/JSファイルをassets/ディレクトリに再配置（6+2ファイル）
    - index.htmlのパス更新（css/ → assets/css/、js/ → assets/js/）
    - 作業用MDファイル9個を_internal/へ移動
    - 空ディレクトリ9個を削除（backup_* 5個、categories、drugs、groups、stories）
  - **最終構造**: 
    - シンプルな5ディレクトリ構成（index.html、generated/、assets/、archive/、_internal/）
    - generated/は空の状態を維持（ビルドツール出力用）
  - **効果**:
    - 公開コンテンツと内部文書の明確な分離
    - ビルドツールとの整合性確保
    - 保守性と拡張性の向上
- **2025-06-30 18:00**: project-docs内の整理とCLAUDE.md内パス更新完了（CEO単独作業）
  - **実施内容**:
    - project-docs内の空ディレクトリ削除（architecture/, templates/, HTMLバックアップ内の空フォルダ）
    - CLAUDE.md内の古いディレクトリパスを新構造に更新
    - ディレクトリ構造セクションを最新の7ディレクトリ構造に更新
    - project-docsの時系列構造への移行を反映
  - **効果**: 
    - ドキュメントとコードの完全な整合性確保
    - 新規参加者の混乱防止
    - 正確なパス参照による作業効率向上
- **2025-06-30 17:23**: 古いディレクトリの完全削除とクリーンアップ完了（CEO単独作業）
  - **実施内容**: 
    - 未処理ファイル26個の適切な移行（HTMLファイル、differentiation、exhibition等）
    - 古いディレクトリ6個の完全削除（drug_database/, stories/, study_tools/, resources/, differentiation/, exhibition/）
  - **最終構造**: 
    - 7つの新ディレクトリのみの綺麗な構造を実現
    - 総ファイル数: 93ファイル（drugs: 23, drug_evolution: 19, drug_stories: 14, study_guides: 12, _resources: 8, _system: 7, drug_database_originated: 10）
  - **効果**: 
    - 混乱の原因となる旧構造の完全排除
    - ビルドツール更新への準備完了
    - PharmaDxの核心価値が明確に反映される構造の確立
- **2025-06-30 17:12**: コンテンツディレクトリ構造改革実施完了（CEO単独作業）
  - **実施内容**: 計画に基づく全5フェーズの移行作業完了（約10分で完了）
  - **移行規模**: 
    - 67ファイルを新構造に移行（drugs: 23、drug_evolution: 17、drug_stories: 14、study_guides: 7、_system: 6）
    - 15の新規ディレクトリ作成
    - バックアップ作成済み（_old_files/backup_20250630_1705/）
  - **主要成果**:
    - drugs/: 循環器系13、消化器系3、内分泌系3、精神科系2、抗菌薬1
    - drug_evolution/: 進化モデル9、処方実態2、臨床エコシステム6
    - drug_stories/: ペニシリン、インスリン、高血圧等の感動ストーリー集約
    - study_guides/: 国試対策、記憶ツール、オーケストラ理論等を体系化
  - **残課題**: 
    - ビルドツール（config.json、convert_pharmadx.js）の更新が必要
    - 内部リンクの更新が必要
  - **効果**: PharmaDxの核心価値「なぜ似た薬があるのか」が明確に可視化される構造を実現
- **2025-06-30 17:05**: コンテンツディレクトリ構造改革計画策定（CEO単独作業）
  - **問題認識**: drug_database内37ファイルの無秩序な混在、特にcardiovascular/の17ファイル集中
  - **新構造設計**: ユーザーの「知りたい」に直接応える4階層構造
    - drugs/: 個別薬剤事典（この薬について知りたい）
    - drug_evolution/: なぜ似た薬があるのか（PharmaDxの核心価値）
    - drug_stories/: 薬の物語（感動的な開発秘話）
    - study_guides/: 薬学学習ガイド（効率的に学びたい）
  - **成果物**:
    - CONTENT_DIRECTORY_REFORM_DESIGN_20250630.md: 詳細設計書
    - CONTENT_MIGRATION_MAPPING_20250630.md: 具体的移行マッピング（100ファイル）
    - BUILD_SYSTEM_UPDATE_PLAN_20250630.md: ビルドシステム更新計画
  - **期待効果**: 教育価値最大化、300薬剤拡張対応、直感的構造の実現
- **2025-06-30 17:45**: 補強済みPPIファイルをメインdrug_databaseへ移動
  - **対象**: エソメプラゾール、ランソプラゾール（大幅に内容補強済み）
  - **理由**: 単なるHTML復元を超えた独自分析・深い洞察を含む高品質コンテンツ
  - **効果**: PPI関連コンテンツの集約、ユーザビリティ向上
  - **相互参照**: PPI_evolution_model.mdに個別薬剤へのリンク追加
- **2025-06-30 17:30**: HTML→MD逆変換完了（12薬剤・2,450行）
  - **背景**: 12薬剤が詳細HTMLのみ存在、MDソースファイル欠如
  - **実行**: originated専用ディレクトリで安全にMD生成
  - **成果**: 全12薬剤のMDファイル作成完了（合計2,450行）
    - ARB系: テルミサルタン（133行）、ロサルタン（160行）、カンデサルタン（173行）
    - 循環器系: スピロノラクトン（178行）
    - SGLT2: エンパグリフロジン（172行）
    - スタチン: ロスバスタチン（205行）
    - PPI: オメプラゾール（261行）、エソメプラゾール（210行）、ランソプラゾール（264行）
    - 糖尿病: メトホルミン（242行）
    - SSRI: エスシタロプラム（211行）、セルトラリン（241行）
  - **品質**: 全ファイルで統一構造（5分サマリー、歴史、臨床、副作用、将来展望）維持
  - **効果**: MD→HTMLの一方向フロー確立、バージョン管理可能に
- **2025-06-30 16:45**: MD/HTML不整合の発見と文書化
  - **発見**: 10薬剤の詳細MDファイル（5,328行）が未活用状態
  - **原因**: Phase 2でMD作成後、HTML変換が未実行
  - **影響**: ビソプロロール、ダパグリフロジン等の充実した内容が非公開
  - **文書化**:
    - MD_HTML_DISCREPANCY_REPORT_20250630.md - 不整合状況報告
    - MD_FILE_QUALITY_SAMPLES_20250630.md - MDファイル品質サンプル
    - HTML_TO_MD_CONVERSION_PLAN_20250630.md - 逆変換計画
- **2025-06-30 15:30**: ビルドツールの根本的修正 - 英語名統一化
  - **問題**: config.jsonとファイル名の不整合（カタカナ vs 英語）によるビルドツールの機能不全
  - **原因**: 内部データがカタカナ名、実ファイルが英語名の不整合
  - **修正**: 
    - config.json: phase1Drugs、drugInfoキーを英語名に統一
    - 各薬剤にdisplayNameフィールド追加（日本語表示名）
    - convert_pharmadx.js: displayName使用で表示層を分離
  - **結果**: 薬剤名変換不要、エラー削減、保守性向上
  - **教訓**: 内部処理は英語、表示は日本語の明確な分離が重要
- **2025-06-30 14:31**: index.html薬剤カード重複問題を修正
  - **問題**: Phase 2実装時に薬剤カードが重複（42個）、カタカナ名と英語名のリンクが混在
  - **原因**: ビルドツールがカタカナ名HTMLを生成したが、実際のファイルは英語名
  - **修正**: 22個の英語名リンクに統一、不完全なHTML構造も修正
  - **結果**: 404エラー解消、正しい22薬剤のカード表示を実現
- **2025-06-30 04:03**: Phase 2完了 - 22薬剤100%実装達成
  - **Phase 1**: metformin, rosuvastatin, spironolactone（3薬剤）
  - **Phase 2 Batch 1**: carvedilol, bisoprolol, enalapril, perindopril, furosemide, dapagliflozin（6薬剤）
  - **Phase 2 Batch 2**: atorvastatin, warfarin, digoxin, vancomycin（4薬剤）
  - **既存実装**: ARB×2, PPI×2, SSRI×2, その他3薬剤（9薬剤）
  - **総成果**: 10,500行以上の教育コンテンツ、予定より2時間39分前倒し完了
- **2025-06-29 20:15**: 404エラー完全解決
  - **問題**: 全22薬剤ページで404エラー（CSS/JS参照エラー、日本語ファイル名リンク）
  - **対応**: CEO-Manager-Dev2協働により100%修正完了
  - **確認**: 全ファイルの品質検証完了、エラーゼロ達成
  - **教訓**: 「問題解決の絶対原則」遵守、部分的修正では不十分、完全検証必須
- **2025-06-29 15:52**: 緊急セキュリティ対応 - バックアップディレクトリの公開リスク除去
  - **問題発見**: セカンドオピニオン監査により、docs/backup_*（648KB×2）が公開状態と判明
  - **重大性**: GitHub Pages経由で全世界からアクセス可能な状態が継続
  - **即時対応**: docs/backup_* を project-docs/archive/backups/ に移動完了
  - **追加発見**: 薬剤ページ生成不足（6/20）、リンクパス不整合、日本語ファイル名問題
  - **対応計画**: INTEGRATED_RESOLUTION_PLAN_20250629.md 策定
  - **教訓**: 監査の重要性、更新履歴の正確性、バックアップ配置場所の慎重な選択
- **2025-06-29 18:30**: docs/ディレクトリの誤用修正（部分的）
  - **問題発見**: docs/dev_logs/, docs/*.backup, docs/server.log等が公開ディレクトリに配置
  - **重大リスク**: GitHub Pages経由で内部文書が全世界に公開される危険性
  - **対策実行**: 一部の内部文書をproject-docs/archive/development-logs/に移動
  - **予防策**: CLAUDE.md・README.mdにdocs/の性質と配置禁止事項を明記
  - **教訓**: docs/は公開コンテンツ専用、内部文書は絶対配置禁止
  - **注記**: backup_*ディレクトリは15:52まで移動されず残存していた
- **2025-06-29 18:00**: project-docsディレクトリ大規模整理完了
  - **問題**: 深いネスト構造（project_management/planning/）とルート散乱ファイル
  - **解決**: 論理的・フラット化構造への再編（6つのカテゴリ分類）
  - **改善**: reference/, architecture/, guides/, planning/, progress/, archive/
  - **効果**: ドキュメント発見性向上、相対パス問題解決、バックアップディレクトリ整理
- **2025-06-29 16:00**: CLAUDE.md無バックアップ全面改訂インシデント発生・復元完了
  - **16:30**: バックアップなしでの全面改訂実行（重大ミス）
  - **17:00**: 重要情報消失発覚、復元作業開始
  - **17:30**: 重要な教訓・技術的注意事項・協働体制詳細の復元完了
  - **教訓**: バックアップは絶対必須、「急ぐ」は理由にならない
- **2025-06-29**: アーキテクチャ設計書作成 - コンテンツ分離型設計の明文化
- **2025-06-29**: Phase 2大規模再構築完了 - 論理的ディレクトリ構造・統合ビルドプロセス確立
- **2025-06-28**: Git Worktree不使用方針確定
- **2025-06-23**: CLAUDE.md誤上書きインシデントの教訓追加、絶対的前提ルール追加
- **2025-06-22**: Firebase無料枠超過の教訓を追加

---

**PharmaDx** - 薬学教育の未来を創造する包括的プラットフォーム