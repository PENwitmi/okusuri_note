# 15-PHASE3_INTEGRATION_TEST_PLAN.md

**プロジェクト**: UI/UX ビューポート最適化 Phase 3統合テスト計画  
**作成日**: 2025-07-06 12:50  
**作成者**: CEO  
**目的**: sidebar.css + mobile-controls.css統合テストの詳細計画  
**対象**: metformin-refined.html での動作確認

---

## 📊 **現状確認（素晴らしい進捗）**

### **実装済み項目**

1. **CSS実装**: ✅ 完了
   - sidebar.css（114行、新規変数定義含む）
   - mobile-controls.css（90行程度）
   - level-selector.css編集（Manager実施中）

2. **HTML準備**: ✅ 既に統合済み
   - metformin-refined.htmlに全要素実装済み
   - content-with-sidebarラッパー
   - サイドバー要素（855-900行）
   - モバイル要素（903-908行）
   - JavaScript関数（970行〜）

---

## 🎯 **Phase 3テスト項目**

### **1. PC環境テスト（目標：65%→85%コンテンツ領域）**

#### **表示確認**
- [ ] サイドバーが正しく250px幅で表示
- [ ] メインコンテンツがグリッドレイアウトで配置
- [ ] スティッキー配置でスクロール時も固定
- [ ] レベル選択UIがサイドバー内で縦並び

#### **機能確認**
- [ ] レベル切替が正常動作
- [ ] 関連薬剤リンクがホバーで反応
- [ ] サイドバー内スクロールが独立

#### **測定項目**
- [ ] コンテンツ表示領域の実測（85%達成確認）
- [ ] ヘッダー高さ（60px確認）

### **2. モバイル環境テスト（目標：45%→90%コンテンツ領域）**

#### **表示確認**
- [ ] サイドバー非表示（display: none）
- [ ] FABボタンが右下に表示
- [ ] 通常レイアウトでコンテンツ表示

#### **機能確認**
- [ ] FABタップでボトムシート表示
- [ ] オーバーレイタップで閉じる
- [ ] ハンドルドラッグで閉じる
- [ ] レベル切替後に自動で閉じる

#### **測定項目**
- [ ] コンテンツ表示領域の実測（90%達成確認）
- [ ] FABサイズ（56px確認）
- [ ] ボトムシート最大高さ（60vh確認）

### **3. レスポンシブ境界テスト（768px）**

- [ ] 767px：モバイルレイアウト
- [ ] 768px：PCレイアウト
- [ ] 境界での切替スムーズ
- [ ] レイアウト崩れなし

---

## 📝 **テスト手順**

### **Step 1: ローカルサーバー起動**
```bash
cd /Users/nishimototakashi/claude\ code/ai-team/code/okusuri_note/docs
python3 -m http.server 8000
```

### **Step 2: ブラウザでアクセス**
```
http://localhost:8000/drugs-v2/metformin-refined.html
```

### **Step 3: デバイス別テスト**

#### **PC環境**
1. フルスクリーンで表示
2. サイドバー表示確認
3. レベル切替動作確認
4. スクロール動作確認

#### **モバイル環境**
1. デベロッパーツールでモバイル表示
2. iPhone 12 Pro（390×844）
3. FAB表示・タップ確認
4. ボトムシート動作確認

### **Step 4: 測定**
- デベロッパーツールで要素サイズ測定
- スクリーンショット撮影
- 問題点の記録

---

## 🔧 **想定される調整項目**

### **可能性のある問題**
1. **CSS変数未定義エラー**
   - --spacing-*系の変数
   - --transition-*系の変数

2. **レイアウト崩れ**
   - グリッドの入れ子構造
   - 既存CSSとの競合

3. **JavaScript連携**
   - level-selector.jsとの統合
   - ボトムシート制御の調整

### **対応方針**
- 問題発見時は即座に修正
- 最小限の変更で対応
- 13番文書の設計思想を維持

---

## 📊 **成功基準**

### **定量的基準**
- **PC**: コンテンツ表示領域 85%以上
- **モバイル**: コンテンツ表示領域 90%以上
- **パフォーマンス**: 3秒以内の初期表示

### **定性的基準**
- **使いやすさ**: 直感的な操作
- **美しさ**: 統一感のあるデザイン
- **安定性**: エラーなし、崩れなし

---

## 🚀 **次のステップ**

### **Phase 3完了後**
1. **問題リスト作成**
2. **修正実施**
3. **再テスト**
4. **Phase 4（JavaScript統合）へ**

### **Manager作業完了待ち**
- level-selector.css編集完了
- 統合テスト共同実施

---

**テスト準備完了**: metformin-refined.htmlは既に新システムに対応済み  
**期待**: スムーズな統合と目標達成  
**リスク**: 最小限（既存実装との高い整合性）