# CSS背景色改革要件定義書

作成日時: 2025-07-26  
作成者: Developer

## 概要

薬剤個別ページにおけるCSS背景色の過剰使用問題を解決するための要件定義書。
サイト全体の視覚的な気持ち悪さの原因となっている「色付き背景の濫用」を修正し、
白背景を基調とした読みやすいデザインに改善する。

## 問題点

### 1. 現状の問題
- **ほぼすべてのボックスに背景色が設定されている**
  - 構造的な内容にまでinfo-box（青背景）が使われている
  - 白背景の部分がほとんどない
  - 視覚的な圧迫感と読みにくさの原因

### 2. 具体的な誤用例
```html
<!-- ❌ 悪い例：薬理作用のメインコンテンツにinfo-boxを使用 -->
<div class="info-box">
    <h4>1. 低血糖症状マスクのメカニズム</h4>
    <!-- これは構造的な内容であり、補足情報ではない -->
</div>

<!-- ❌ 悪い例：色の中に色をネスト -->
<div class="info-box">
    <h4>作用機序</h4>
    <p>基本的な説明...</p>
    <p class="alert">⚠️ ただし...</p>  <!-- 色の中に色 -->
</div>
```

## 改修方針

### 1. CSS背景デザイン原則（CLAUDE.mdより）
1. **大きな領域は白背景を基本とする**
2. **色の中に色をネストしない**

### 2. ボックスクラスの使い分け

#### 色付き背景ボックス（アクセント用）
- `info-box`: **補足情報、エビデンスのみ**（青背景）
- `alert-box`: 警告・注意事項（黄背景）
- `highlight-box`: 強調情報（緑背景）
- `key-point-box`: キーポイント（橙背景）

#### 白背景ボックス（構造用）
- `simple-box`: 構造化情報、流れ図（薄い枠線＋影）
- `plain-box`: シンプルな枠組み（枠線のみ）

### 3. 判断基準

#### info-box → simple-boxへの変更が必要なケース
- 薬理作用の説明
- 作用機序の解説
- 臨床的意義の説明
- 併用時の注意点の詳細
- その他のメインコンテンツ

#### info-boxのまま維持すべきケース
- 「参考」「補足」「エビデンス」などの追加情報
- メインの説明を補完する副次的な情報
- 研究データや引用情報

## 修正手順

### 1. 対象ファイルの特定
```bash
# info-boxの使用箇所を確認
grep -n "info-box" carvedilol.html
```

### 2. 各info-boxの内容確認
- その内容は「構造的」か「補足的」か判断
- 構造的な内容の場合 → simple-boxに変更

### 3. クラス名の変更
```html
<!-- 修正前 -->
<div class="info-box">
    <h4>1. 低血糖症状マスクのメカニズム</h4>
    ...
</div>

<!-- 修正後 -->
<div class="simple-box">
    <h4>1. 低血糖症状マスクのメカニズム</h4>
    ...
</div>
```

### 4. 色のネスト解消
- info-box内の`<p class="alert">`などは削除または移動
- 警告が必要な場合は、info-boxの外にalert-boxとして独立配置

## 注意事項

### ⚠️ 絶対にやってはいけないこと
1. **divタグ自体を削除しない**（構造が崩壊する）
2. **プレーンHTMLにしない**（クラスを変更するだけ）
3. **新しいクラスを作成しない**（既存のクラスから選ぶ）

### ✅ 正しい対応
1. **クラス名のみを変更**
2. **divの構造は維持**
3. **既存のcomponents.cssで定義済みのクラスを使用**

## 参考ファイル

### 良い例として参照すべきファイル
- `/Users/nishimototakashi/claude code/okusuri_note/docs/drugs/metformin.html`
  - 白背景を基調とした構成
  - info-boxを補足情報のみに限定使用
  - 読みやすい視覚的階層

### CSS定義ファイル
- `/Users/nishimototakashi/claude code/okusuri_note/docs/assets/css/components.css`
  - 各ボックスクラスの定義
  - simple-box: 134-142行目
  - info-box: 70-88行目

## 期待される効果

1. **視覚的な改善**
   - 白背景による読みやすさの向上
   - 適切な視覚的階層の実現
   - 圧迫感の解消

2. **情報構造の明確化**
   - メインコンテンツと補足情報の区別
   - 重要度に応じた適切な装飾

3. **ユーザビリティの向上**
   - 長時間読んでも疲れない
   - 情報の優先順位が一目で分かる