# HTML First Architecture - PharmaDx新設計方針

**作成日時**: 2025-06-30 19:45  
**重要度**: 🔴 最高（アーキテクチャ根本変更）

## 概要

PharmaDxプロジェクトは、**HTML直接編集を第一とする新アーキテクチャ**に移行します。これは、「なぜ似た薬が複数存在するのか」という核心価値を最大限に表現するための戦略的決定です。

## 背景：なぜ方針転換が必要か

### 1. 高品質HTMLコンテンツの存在
- **12薬剤の手作業HTML**（100-916行）が既に存在
- ロサルタン（764行）：医師の証言、感動的ストーリー、豊富な視覚表現
- これらは**PharmaDxの理想形**を体現している

### 2. MD→HTML変換の根本的限界
- **情報損失**: 764行→83行（89%削減）
- **表現力不足**: 引用、証言、視覚的階層、感動的要素が失われる
- **価値の毀損**: PharmaDxの核心「感動的で教育的」が実現不可能

### 3. 手段の目的化の回避
- 「コンテンツ分離」は手段であって目的ではない
- 最終的な価値は**ユーザーが見るHTML**にある
- プロセスよりも**成果物の品質**を優先すべき

## 新アーキテクチャの原則

### 🎯 第一原則：HTML First
```
優先順位：
1. HTML直接編集 → 最高品質の実現
2. MDファイル → 下書き・メモ・構想用
3. 変換ツール → 補助的使用のみ
```

### 📊 品質基準

#### 必須要件（全薬剤ページ）
- **最低行数**: 500行
- **構造的要素**:
  - ヒーローセクション（薬剤の顔）
  - 30秒サマリー（本質を凝縮）
  - 歴史的背景（開発ストーリー）
  - 臨床価値（なぜ必要か）
  - 副作用と安全性
  - 処方実践ガイド
  - 将来展望

#### 感動的要素（必須）
- **医師・患者の証言**: 実体験に基づく感動
- **歴史的文脈**: 薬剤開発の人間ドラマ
- **視覚的階層**: 情報の重要度を視覚化
- **教育的ストーリー**: 記憶に残る物語

### 🛠️ 技術スタック

#### HTML開発
- **直接編集**: VS Code、WebStorm等のモダンエディタ
- **ライブプレビュー**: ブラウザでの即時確認
- **バージョン管理**: Gitで履歴管理

#### スタイリング
- **CSS**: 統一されたデザインシステム
- **レスポンシブ**: モバイル対応必須
- **アクセシビリティ**: WCAG 2.1準拠

## ワークフロー

### 1. 新規薬剤ページ作成
```
1. 高品質HTMLテンプレートから開始
2. 医学的内容の調査・執筆
3. 感動的要素の追加（証言、ストーリー）
4. 視覚的装飾とレイアウト調整
5. 品質チェック（500行以上、必須要素確認）
6. docs/generated/drugs/に配置
```

### 2. 既存コンテンツの改善
```
1. アーカイブから高品質HTMLを復元
2. 最新情報でアップデート
3. リンクとパスの修正
4. 品質基準との照合
5. 不足要素の追加
```

### 3. MDファイルの役割（補助的）
- **下書き**: アイデアの整理
- **構造設計**: セクション構成の検討
- **共同編集**: 複数人での内容調整
- **バックアップ**: テキストベースの保存

## ディレクトリ構造

```
pharma_dex/
├── docs/
│   ├── generated/
│   │   ├── drugs/         # 高品質HTML薬剤ページ（メイン）
│   │   ├── groups/        # 薬効群ページ
│   │   └── stories/       # ストーリーページ
│   └── assets/            # CSS、JS、画像
├── content/               # MDファイル（補助的）
│   └── drafts/           # 下書き・構想用
├── templates/            # HTMLテンプレート集
│   ├── drug-detail.html  # 薬剤詳細ページテンプレート
│   └── components/       # 再利用可能コンポーネント
└── tools/                # 補助ツール（必要時のみ使用）
```

## 移行計画

### Phase 1: 高品質HTML復活（即時）
- アーカイブから12薬剤のHTMLを復元
- パス修正と動作確認
- 成功事例として活用

### Phase 2: 新規開発（継続的）
- 残り薬剤をHTML直接編集で作成
- 500行以上の品質基準遵守
- 感動的要素の必須化

### Phase 3: 既存資産の整理
- MDファイルは参考資料として保持
- 変換ツールは将来の選択肢として維持
- 優先度は常にHTML品質

## 期待される成果

### 品質向上
- **現状**: 83行の貧弱なHTML
- **目標**: 500-900行の充実したコンテンツ
- **価値**: PharmaDxブランドの完全な体現

### 教育効果
- **感動**: 医師の証言、開発ストーリー
- **記憶**: 視覚的階層、物語性
- **理解**: 「なぜ」への深い回答

### 開発効率
- **直接的**: 変換ロスがない
- **即座**: ブラウザで即確認
- **柔軟**: 細かな調整が可能

## リスクと対策

### リスク
1. **統一性**: 個別編集による不統一
2. **メンテナンス**: HTMLの直接管理
3. **協働**: 複数人での編集

### 対策
1. **テンプレート**: 統一されたHTML構造
2. **スタイルガイド**: 明確な品質基準
3. **レビュー**: 品質チェックプロセス

## 結論

PharmaDxの核心価値「なぜ似た薬が複数存在するのか」を最大限に表現するため、**HTML直接編集を第一**とします。これにより、感動的で教育的な、真に価値あるコンテンツを創造します。

MDファイルと変換ツールは補助的役割として残しますが、**最終的な価値はHTMLにある**ことを常に意識します。

---

**この方針は即日発効し、全ての新規開発はHTML直接編集で行います。**