# ゼロベースCSS再構築実行計画

**作成日時**: 2025-07-03 01:04  
**作成者**: CEO  
**目的**: HTMLクリーンアップからの段階的CSS構築による根本的解決  
**重要度**: 最高（実装フェーズ開始）

---

## 📌 基本方針

### 「置き換え」から「ゼロベース構築」へ
- **誤**: 既存クラスを新クラスに置き換える
- **正**: すべてのクラスを削除し、必要なものだけを新規追加

### なぜゼロベースか
1. **過去の複雑性からの解放**: 637個の混沌から脱却
2. **本質的に必要なものだけ**: 推測ではなく実需に基づく
3. **保守性の確保**: シンプルで理解しやすい構造

---

## 🎯 実行ステップ

### Step 1: 準備作業（15分）

#### 1.1 バックアップ作成
```bash
# 作業ディレクトリ作成
mkdir -p _old_files/backup_20250703_0100/

# メトホルミンHTMLのバックアップ
cp docs/drugs-v2/metformin-v2-components.html \
   _old_files/backup_20250703_0100/

# ver2-unified.cssのバックアップ（念のため）
cp docs/assets/css/ver2-unified.css \
   _old_files/backup_20250703_0100/
```

#### 1.2 作業用コピーの作成
```bash
# 作業用ディレクトリ
mkdir -p work/

# 作業用ファイルをコピー
cp docs/drugs-v2/metformin-v2-components.html \
   work/metformin-clean.html
```

---

### Step 2: HTMLクリーンアップ（30分）

#### 2.1 class属性の完全削除

**削除対象**:
- `<body class="endo-theme">` → `<body>`
- `<div class="level-indicator">` → `<div>`
- `<span class="drug-class-badge endocrine">` → `<span>`
- その他すべてのclass属性

**削除方法**:
```bash
# sedコマンドで一括削除（バックアップ済みの場合）
sed -i '' 's/ class="[^"]*"//g' work/metformin-clean.html
```

**手動確認項目**:
- id属性は維持されているか
- data属性は維持されているか
- HTML構造は崩れていないか

#### 2.2 クリーンアップ後の確認

```html
<!-- Before -->
<section class="basic-info-card level-1-content">
    <div class="drug-name-display">
        <h1 class="brand-name">メトグルコ®</h1>
        <p class="generic-name">メトホルミン塩酸塩</p>
    </div>
</section>

<!-- After -->
<section>
    <div>
        <h1>メトグルコ®</h1>
        <p>メトホルミン塩酸塩</p>
    </div>
</section>
```

---

### Step 3: 構造分析とクラス付与（1時間・CEO作業）

#### 3.1 作業の流れ

**HTML構造を把握しながら、その場で必要なクラスを付与**

1. **最上位構造の分析と付与**（15分）
   - body要素
   - メインコンテナ
   - 大きなセクション分け
   - 例: `<section>` → `<section class="card">`

2. **コンポーネント単位の分析と付与**（30分）
   - 薬剤ヘッダー部分
   - レベルインジケーター
   - サマリーグリッド
   - FAQ セクション
   - 処方パターン
   - 例: `<div>` → `<div class="drug-header">`

3. **詳細要素の分析と付与**（15分）
   - ボタン
   - バッジ  
   - リスト項目
   - 強調テキスト
   - 例: `<button>` → `<button class="btn btn--primary">`

#### 3.2 命名原則

- **機能を表す名前**（見た目ではなく）
- **BEM記法は必要最小限に**
- **短く分かりやすく**

#### 3.3 付与クラスのリスト作成

作業しながら、使用したクラスをリストアップ：
```
# 構造系
.container
.section  
.card

# コンポーネント系
.drug-header
.level-selector
.summary-grid

# ユーティリティ系
.active
.hidden
```

---

### Step 4: CSS実装（1時間・Manager作業）

**Step 3で付与されたクラスに基づいてCSS実装**

**実装順序**:

1. **基本設定**（15分）
```css
/* ver2-unified.css */
@import "../css/style.css";
@import "../css/drug-detail.css";

/* リセット・基本設定 */
```

2. **構造系CSS**（20分）
```css
.container { ... }
.section { ... }
.card { ... }
```

3. **コンポーネント系CSS**（20分）
```css
.drug-header { ... }
.level-selector { ... }
```

4. **調整**（5分）

---

### Step 5: 検証とテンプレート化（30分・協働）

#### 5.1 動作確認

**チェック項目**:
- [ ] レイアウトが崩れていないか
- [ ] レスポンシブ対応
- [ ] インタラクション動作
- [ ] 色彩・可読性

#### 5.2 成果物整理

1. **使用クラスリスト**
   - 最終的に使用したクラスの一覧
   - 各クラスの用途説明

2. **CSS行数・サイズ**
   - 追加したCSS行数
   - ファイルサイズ

3. **次薬剤への適用ガイド**
   - テルミサルタンへの適用方法
   - 共通化のポイント

---

## 📊 期待される成果

### 数値目標
| 項目 | 現状 | 目標 | 削減率 |
|------|------|------|---------|
| HTMLクラス数 | 168個 | 30-40個 | 76-82% |
| CSS定義数 | 614個 | 40-50個 | 92-93% |
| CSS行数 | 6,442行 | 300行以下 | 95%+ |

### 品質目標
- **可読性**: HTMLを見ただけで構造が理解できる
- **保守性**: 新機能追加が容易
- **再利用性**: 他薬剤にそのまま適用可能

---

## ⚠️ 注意事項

### やってはいけないこと
1. **既存クラスの流用**: 過去の複雑性を引き継ぐ
2. **過度な細分化**: 必要以上にクラスを作る
3. **見た目ベースの命名**: red-box、big-textなど

### 推奨事項
1. **機能ベースの命名**: drug-header、warning-list
2. **最小限の実装**: まず動くものを作る
3. **段階的な拡張**: 必要に応じて追加

---

## 🔄 実行タイムライン

```
09:00-09:15  Step 1: 準備作業
09:15-09:45  Step 2: HTMLクリーンアップ
09:45-10:15  Step 3: 構造分析（協働）
10:15-11:15  Step 4.1: HTMLクラス付与（CEO）
10:15-11:15  Step 4.2: CSS実装（Manager）※並列可
11:15-11:45  Step 5: 検証・テンプレート化（協働）
```

**総所要時間**: 2時間45分

---

## 🎯 成功基準

1. **動作確認**: メトホルミンページが正常表示
2. **クラス数**: 40個以下
3. **CSS行数**: 300行以下
4. **再利用性**: 他薬剤に適用可能なテンプレート

---

**文書作成完了**: 2025-07-03 01:04  
**次のアクション**: ユーザーレビューによる部分修正